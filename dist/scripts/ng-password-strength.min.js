!function(){"use strict";angular.module("ngPasswordStrength",[]).directive("ngPasswordStrength",function(){return{template:'<div class="progress {{valueClass.outter}}"><div class="{{valueClass.inner}} {{innerClass}}" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="100" ng-style="{width : ( value + \'%\' ) }"><span class="sr-only">{{value}}%</span></div></div>',restrict:"A",scope:{pwd:"=ngPasswordStrength",value:"=strength",innerClassPrefix:"@?",outterClassPrefix:"@?",innerClass:"@?",mode:"@?",measure:"&?"},link:function(a){function b(b){var d=a.measure();return angular.isFunction(d)?d(b,c):c(b)}function c(a,b){var c={letters:"abcdefghijklmnopqrstuvwxyz",numbers:"01234567890",symbols:"\\!@#$%&/()=?Â¿"},d=b||{};_.defaults(d,c);var e,f,g,h,i=function(a){for(var b=a.length-1,c="";b>=0;c+=a[b--]);return c},j={pos:{},neg:{}},k={pos:{},neg:{seqLetter:0,seqNumber:0,seqSymbol:0}},l=0,m=d.letters,n=d.numbers,o=d.symbols;if(a){for(j.pos.lower=a.match(/[a-z]/g),j.pos.upper=a.match(/[A-Z]/g),j.pos.numbers=a.match(/\d/g),j.pos.symbols=a.match(/[$-/:-?{-~!^_`\[\]]/g),j.pos.middleNumber=a.slice(1,-1).match(/\d/g),j.pos.middleSymbol=a.slice(1,-1).match(/[$-/:-?{-~!^_`\[\]]/g),k.pos.lower=j.pos.lower?j.pos.lower.length:0,k.pos.upper=j.pos.upper?j.pos.upper.length:0,k.pos.numbers=j.pos.numbers?j.pos.numbers.length:0,k.pos.symbols=j.pos.symbols?j.pos.symbols.length:0,e=_.reduce(k.pos,function(a,b){return a+Math.min(1,b)},0),k.pos.numChars=a.length,e+=k.pos.numChars>=8?1:0,k.pos.requirements=e>=3?e:0,k.pos.middleNumber=j.pos.middleNumber?j.pos.middleNumber.length:0,k.pos.middleSymbol=j.pos.middleSymbol?j.pos.middleSymbol.length:0,j.neg.consecLower=a.match(/(?=([a-z]{2}))/g),j.neg.consecUpper=a.match(/(?=([A-Z]{2}))/g),j.neg.consecNumbers=a.match(/(?=(\d{2}))/g),j.neg.onlyNumbers=a.match(/^[0-9]*$/g),j.neg.onlyLetters=a.match(/^([a-z]|[A-Z])*$/g),k.neg.consecLower=j.neg.consecLower?j.neg.consecLower.length:0,k.neg.consecUpper=j.neg.consecUpper?j.neg.consecUpper.length:0,k.neg.consecNumbers=j.neg.consecNumbers?j.neg.consecNumbers.length:0,h=0;h<m.length-2;h++){var p=a.toLowerCase();g=m.substring(h,parseInt(h+3)),f=i(g),(-1!==p.indexOf(g)||-1!==p.indexOf(f))&&k.neg.seqLetter++}for(h=0;h<n.length-2;h++)g=n.substring(h,parseInt(h+3)),f=i(g),(-1!==a.indexOf(g)||-1!==a.toLowerCase().indexOf(f))&&k.neg.seqNumber++;for(h=0;h<o.length-2;h++)g=o.substring(h,parseInt(h+3)),f=i(g),(-1!==a.indexOf(g)||-1!==a.toLowerCase().indexOf(f))&&k.neg.seqSymbol++;k.neg.repeated=_.chain(a.toLowerCase().split("")).countBy(function(a){return a}).reject(function(a){return 1===a}).reduce(function(a,b){return a+b},0).value(),l+=4*k.pos.numChars,k.pos.upper&&(l+=2*(k.pos.numChars-k.pos.upper)),k.pos.lower&&(l+=2*(k.pos.numChars-k.pos.lower)),(k.pos.upper||k.pos.lower)&&(l+=4*k.pos.numbers),l+=6*k.pos.symbols,l+=2*(k.pos.middleSymbol+k.pos.middleNumber),l+=2*k.pos.requirements,l-=2*k.neg.consecLower,l-=2*k.neg.consecUpper,l-=2*k.neg.consecNumbers,l-=3*k.neg.seqNumber,l-=3*k.neg.seqLetter,l-=3*k.neg.seqSymbol,j.neg.onlyNumbers&&(l-=k.pos.numChars),j.neg.onlyLetters&&(l-=k.pos.numChars),k.neg.repeated&&(l-=k.neg.repeated/k.pos.numChars*10)}return Math.max(0,Math.min(100,Math.round(l)))}function d(b){switch(Math.round(b/33)){case 0:case 1:return{inner:a.outterClassPrefix+"danger",outter:a.innerClassPrefix+"alert"};case 2:return{outter:a.outterClassPrefix+"warning",inner:a.innerClassPrefix+"warning"};case 3:return{outter:a.outterClassPrefix+"success",inner:a.innerClassPrefix+"success"}}}a.value=a.value||b(a.pwd);var e={foundation:{innerClass:"meter"},bootstrap:{innerClass:"progress-bar",innerClassPrefix:"progress-bar-"}};a.innerClassPrefix=a.innerClassPrefix||"",a.outterClassPrefix=a.outterClassPrefix||"",a.$watch("mode",function(){return"bootstrap"===a.mode||"foundation"===a.mode?void angular.extend(a,e[a.mode]):void(a.valueClass=d(a.value))}),a.$watch("pwd",function(){a.value=b(a.pwd),a.valueClass=d(a.value)})}}})}();